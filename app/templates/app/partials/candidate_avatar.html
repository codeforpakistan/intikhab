{% load static %}
{% comment %}
Reusable candidate avatar partial
Usage: {% include 'app/partials/candidate_avatar.html' with candidate=candidate size=80 %}

Parameters:
- candidate: The candidate object (required)
- size: Avatar size in pixels (default: 80)
- shape: Avatar shape - "circle" (default) or "square"
- css_classes: Additional CSS classes (optional)
{% endcomment %}

{% if shape == 'square' %}
  <div class="avatar-container {% if css_classes %}{{ css_classes }}{% endif %}" 
       style="width: {% if size == '100%' %}100%; max-width: 300px{% else %}{{ size|default:80 }}px{% endif %}; 
              height: {% if size == '100%' %}0; padding-bottom: 100%; position: relative{% else %}{{ size|default:80 }}px{% endif %}; 
              overflow: hidden;">
    {% if candidate.user.profile and candidate.user.profile.avatar %}
      <img src="{{ candidate.user.profile.avatar.url }}" 
           alt="{{ candidate.user.get_full_name }}" 
           class="shadow-sm" 
           style="{% if size == '100%' %}position: absolute; top: 0; left: 0; {% endif %}width: 100%; height: 100%; object-fit: cover; object-position: center; border-radius: 8px;" 
           onerror="this.src='{% static 'app/images/default-avatar.svg' %}'">
    {% elif candidate.symbol %}
      <img src="{{ candidate.symbol.url }}" 
           alt="{{ candidate.user.get_full_name }}" 
           class="shadow-sm" 
           style="{% if size == '100%' %}position: absolute; top: 0; left: 0; {% endif %}width: 100%; height: 100%; object-fit: cover; object-position: center; border-radius: 8px;" 
           onerror="this.src='{% static 'app/images/default-avatar.svg' %}'">
    {% else %}
      <img src="{% static 'app/images/default-avatar.svg' %}" 
           alt="{{ candidate.user.get_full_name }}" 
           class="shadow-sm" 
           style="{% if size == '100%' %}position: absolute; top: 0; left: 0; {% endif %}width: 100%; height: 100%; object-fit: cover; object-position: center; border-radius: 8px;">
    {% endif %}
  </div>
{% else %}
  {% if candidate.user.profile and candidate.user.profile.avatar %}
    <img src="{{ candidate.user.profile.avatar.url }}" 
         alt="{{ candidate.user.get_full_name }}" 
         class="rounded-circle {% if css_classes %}{{ css_classes }}{% endif %}" 
         style="width: {{ size|default:80 }}px; height: {{ size|default:80 }}px; object-fit: cover; object-position: center; display: block;" 
         onerror="this.src='{% static 'app/images/default-avatar.svg' %}'">
  {% elif candidate.symbol %}
    <img src="{{ candidate.symbol.url }}" 
         alt="{{ candidate.user.get_full_name }}" 
         class="rounded-circle {% if css_classes %}{{ css_classes }}{% endif %}" 
         style="width: {{ size|default:80 }}px; height: {{ size|default:80 }}px; object-fit: cover; object-position: center; display: block;" 
         onerror="this.src='{% static 'app/images/default-avatar.svg' %}'">
  {% else %}
    <img src="{% static 'app/images/default-avatar.svg' %}" 
         alt="{{ candidate.user.get_full_name }}" 
         class="rounded-circle {% if css_classes %}{{ css_classes }}{% endif %}" 
         style="width: {{ size|default:80 }}px; height: {{ size|default:80 }}px; object-fit: cover; object-position: center; display: block;">
  {% endif %}
{% endif %}